@using Finsa.Caravan.Common.Models.Formatting
@using Finsa.Caravan.DataModel
@using Finsa.Caravan.Mvc.Controllers
@using Finsa.Caravan.Mvc.Controls.DataVisualization
@using Finsa.Caravan.Mvc.Controls.PageElements
@using Finsa.Caravan.Mvc.Controls.ValueHolders

@model Finsa.Caravan.Mvc.ViewModels.Security.SecGroupList

@{
   Layout = "~/Caravan.Mvc/Views/Shared/Pages/VerticalSearchLayout.cshtml";
}

@section ScriptSection {

}

@section SearchCriteriaSection {
   @Html.CaravanVerticalSearchCriteria(new List<CaravanVerticalSearchCriteriumOptions>
   {
      new CaravanVerticalSearchCriteriumOptions
      {
         Label = "Group", Control = () => Html.JQuerySelect2(new JQuerySelect2Options
         {
            ID = "group_id",
            DataSourceUrl = SecurityController.CaravanQueryService + "groups",
            PlaceHolder = "Name or ID",
            QueryBuilder = "getGroupsByNameOrID",
            DataMapper = "mapGroupsForSelect2",
            AllowClear = true
         })
      },
   })
}

@section DataGridSection {
   @Ajax.BootstrapTable(new BootstrapTableOptions
   {
      ID = "tblGroups",
      Items = Model.Groups,
      Columns = new []
      {
         new BootstrapTableColumnOptions
         {
            ID = "grpId", 
            Header = "ID", 
            Sortable = true, 
            HorizontalAlignment = HorizonalTextAlignment.Right, 
            Control = x => x.Id
         },
         new BootstrapTableColumnOptions
         {
            ID = "grpName", 
            Header = "Name", 
            Sortable = true, 
            HorizontalAlignment = HorizonalTextAlignment.Left, 
            Control = x => x.Name
         },
         new BootstrapTableColumnOptions
         {
            ID = "grpDescription", 
            Header = "Description", 
            Sortable = true, 
            HorizontalAlignment = HorizonalTextAlignment.Left, 
            Control = x => x.Description
         },
         new BootstrapTableColumnOptions
         {
            ID = "grpNotes", 
            Header = "Notes", 
            Sortable = true, 
            HorizontalAlignment = HorizonalTextAlignment.Left, 
            Control = x => x.Notes
         },
         new BootstrapTableColumnOptions
         {
            ID = "grpIsAdmin", 
            Header = "Is Admin", 
            Sortable = true, 
            HorizontalAlignment = HorizonalTextAlignment.Left, 
            VerticalAlignment = VerticalTextAlignment.Middle,
             Control = (x) => Html.CheckBox("admin",(x.IsAdmin == 1)? true: false, new {disabled="disabled"})
         },                           
      }
   })
}