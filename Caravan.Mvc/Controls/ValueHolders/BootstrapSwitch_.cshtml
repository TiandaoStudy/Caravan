@* Generator: MvcHelper *@
@* Namespace: Finsa.Caravan.Mvc.Controls.ValueHolders *@

@using System.Web.Mvc
@using Finsa.Caravan.Extensions
@using Finsa.Caravan.Mvc.Controls.ValueHolders

@helper BootstrapSwitch(this HtmlHelper htmlHelper, BootstrapSwitchOptions options) {

   <input id="@options.ID" type="checkbox" />

   <script type="text/javascript">
      $(document).ready(function() {
         $("#@options.ID").bootstrapSwitch({
            state: @options.State.ToJavaScriptBoolean(),
            size: "@options.SizeString"
         });

         $("#@options.ID").on('switchChange.bootstrapSwitch', function(event, state) {
            // Custom handlers
            @(options.OnChange)(event, state);
         
            // Search criteria handling
            var searchCriteria = getSearchCriteria("@options.SearchCriteriaID");
            if (searchCriteria !== undefined) {
               var criteria = searchCriteria.get("criteria");
               criteria["@options.SafeID"] = state;
               searchCriteria.set({ criteria: criteria });
            }
         });
      });
   </script>
}